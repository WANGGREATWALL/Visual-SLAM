# 第 1 讲 预备知识

`王琛` | `2020/10/01`

[toc]

> 本书所有源代码均托管在 GitHub 上: [https://github.com/gaoxiang12/slambook](https://github.com/gaoxiang12/slambook);

## 1.1 本书讲什么

- SLAM 是 Simultaneous Localization and Mapping 的缩写, 中文译作**同时定位与地图构建**. 它是指搭载特定**传感器**的主体, 在**没有环境先验信息**的情况下, 于**运动过程中**建立**环境**的模型, 同时估计自己的**运动**. 如果这里的传感器主要为相机, 那就称为**视觉 SLAM**;
- 本书中会介绍 SLAM 所牵涉的背景知识, 例如**射影几何**、**计算机视觉**、**状态估计理论**、**李群李代数**等, 并在这些背景知识之上, 给出 SLAM 这棵大树的主干, 而略去一部分形状奇特、纹理复杂的枝叶. 我们的目的是让 SLAM 的初学者通过阅读本书快速地成长为能够探索这个领域边缘的研究者;
- 目前, 与 SLAM 相关的书籍主要有《概率机器人》(Probabilistic robotics)、《计算机视觉中的多视图几何》(Multiple View Geometry in Computer Vision)、《机器人学中的状态估计》(State Estimation for Robotics: A Matrix-Lie-Group Approach) 等. 它们内容丰富、论述全面、推导严谨, 是 SLAM 研究者中脍炙人口的经典教材. 然而就目前来看, 还存在两个重要的问题: 其一, 这些图书的目的在于介绍基础理论, SLAM 只是其应用之一. 因此它们并不能算是专门讲解 SLAM 的书籍. 其二, 它们的内容偏重于数学理论, 基本不涉及编程实现, 导致读者经常出现"书能看懂却不会编程"的情况. 而我们认为, 只有读者亲自实现了算法, 调试了各个参数, 才能谈得上真正理解了问题本身;
- 我们会提及 SLAM 的历史、理论、算法、现状, 并把完整的 SLAM 系统分为几个模块: **视觉里程计**、**后端优化**、**建图**, 以及**回环检测**. 你会接触到一些必要的**数学理论**和许多**编程知识**, 会用到 Eigen、OpenCV、PCL、g2o、Ceres 等库, 掌握它们在 Linux 操作系统中的使用方法;

## 1.2 本书主要内容

全书内容主要分为两个部分.

1. 第一部分为**数学基础**篇, 包括:
   - 第 1 讲是前言, 介绍本书基本信息, 习题部分主要包括一些自测题;
   - 第 2 讲为 SLAM 系统概述, 介绍一个 SLAM 系统的组成模块, 各模块的具体工作. 实践部分介绍编程环境的搭建过程以及 IDE 的使用;
   - 第 3 讲介绍三维空间运动, 你将接触到旋转矩阵、四元数、欧拉角的相关知识, 并且在 Eigen 当中使用它们;
   - 第 4 讲为李群和李代数. 你将学到李代数的定义和使用方式, 然后通过 Sophus 操作它们;
   - 第 5 讲介绍针孔相机模型以及图像在计算机中的表达. 你将用 OpenCV 来调取相机的内外参数;
   - 第 6 讲介绍非线性优化, 包括状态估计理论基础、最小二乘问题、梯度下降方法. 你会完成一个使用 Ceres 和 g2o 进行曲线拟合的实验;
2. 第二部分为 **SLAM 技术**篇, 讲述视觉 SLAM 中各个模块的工作原理:
   - 第 7 讲为特征点法的视觉里程计. 包括**特征点的提取与匹配**、对极几何约束的计算、**PnP** 和 ICP 等. 在实践中, 你将用这些方法去估计两个图象之间的运动;
   - 第 8 讲为直接法的视觉里程计. 你将学习**光流**和直接法的原理, 然后利用 g2o 实现一个简单的 RGB-D 直接法;
   - 第 9 讲为视觉里程计的实践章, 你将搭建一个视觉里程计框架, 综合运用先前学过的知识, 实现它的基本功能. 这个过程中, 你会碰到一些问题, 例如优化的必要性、关键帧的选择等;
   - 第 10 讲为后端优化, 主要对 Bundle Adjustment 的深入讨论, 包括基本的 BA, 以及如何利用稀疏性加速求解过程. 你将用 Ceres 和 g2o 分别书写一个 BA 程序;
   - 第 11 讲主要讲后端优化中的位姿图. 位姿图是表达关键帧之间约束的一种更紧凑的形式. 你将用 g2o 和 gtsam 对一个位姿进行优化;
   - 第 12 讲为回环检测, 主要介绍以词袋方法为主的回环检测. 你将用 dbow3 书写字典训练程序和回环检测程序;
   - 第 13 讲为地图构建. 我们会讨论如何使用单目进行稠密深度图的估计 (以及这是多么不可靠), 然后讨论 RGB-D 的稠密地图构建过程. 你会书写极线搜索与块匹配的程序, 然后在 RGB-D 中遇到点云地图和八叉树地图的构建问题;
   - 第 14 讲主要介绍当前的开源 SLAM 项目以及未来的发展方向. 

## 1.3 习题(基本知识自测题)

1. 有线性方程 $Ax=b$, 若已知 $A, b$, 需求解 $x$, 该如何求解? 这对 $A$ 和 $b$ 有哪些要求? 提示: 从 $A$ 的维度和秩角度来分析;
2. 高斯分布是什么? 它的一维形式是什么样子? 它的高维形式是什么样子?
3. 你知道 C++ 中的类吗? 你知道 STL 吗? 你使用过他们吗?
4. 你以前怎样书写 C++ 程序? (你完全可以说只在 Visual C++ 6.0 下写过 C++ 工程, 只要你有写 C++ 和 C 语言的经验就行.)
5. 你知道 C++ 11 标准吗? 其中哪些新特性你听说过或用过? 有没有其他的标准?
6. 你知道 Linux 吗? 你有没有至少使用过一种 (不算安卓), 比如 Ubuntu?
7. Linux 的目录结构是什么样的? 你知道哪些基本命令, 比如 ls, cat 等?
8. 如何在 Ubuntu 中安装软件 (不打开软件中心的情况下)? 这些软件被安装在什么地方? 如果只知道模糊的软件名称 (比如想要装一个名称中含有 eigen 的库), 应该如何安装它?
9. *花一个小时学习一下 Vim, 因为你迟早会用它. 你可以在终端中输入 vimtutor 阅读一遍所有内容. 我们不需要你非常熟练地操作它, 只要能够在学习本书的过程中使用它输入代码即可. **不要在它的插件上浪费时间, 不要想着把 Vim 用成 IDE, 我们只用它做文本编辑的工作.**